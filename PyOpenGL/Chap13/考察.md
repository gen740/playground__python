# 第10回

## 例一
　前回までのプログラムは、マウスによる図形の移動をすることができなかった。
MyRotateCanvas.pyではそのマウス入力をできるようにしている。描画自体は親クラスで
あるMyGLCanvasによって成されている。クラスの継承によって、myGLCanvasのloop関数
をオーバーライドしている。プログラムに変更を加えたり、検証するのは後の考察で試
してみる。

## 例二
　cubeRotate.pyでは実に簡潔にプログラムが書かれている。mainではOpenGLの初期化を
して、前々回の課題で作ったCubeモジュールを用いて立方体のオブジェクトを作り、そ
れを、canvas.loop()で回している。
　そのような簡単なプログラムであるため、表示する立体や回転の速度を帰ることが出
来る。前回の課題で作成した、シェルピンスキー四面体やメンガースポンジも表示する
ことができる(mengerSpongeRotate.py/SierpinskiRotate.py)
　プログラムの19行目では
　thetaX, thetaY = (360*(y-self.y)/self.height, 360*(x-self.x)/self.width) 
　のように設定してある。これは、大体ウインドウ一つ分移動した時に、360度回転する
ようにしていると言うことである。
　18行目では、GLUT_LEFT_BUTTON:と設定してあるのでGLUT_RIGHT_BUTTON:とすると案の
定、右クリックで回転させることが出来るようになった。

## 例一
　mySpinCanvas.pyは、myGLCanvas.pyとは違って、比較的長いコードであるmouseではボ
タンが押されていない時にidle関数が呼ばれ回転が維持される。
　詳しい考察は後ほど行う。


## 例一
　cubeSpin.pyではマウスで動かしたら、idle関数によって慣性で回り続けるように立方
体が回転し続ける。
　詳しく、mySpinCanvasを読んでいて気づいたことであるが、mySpinCanvasの46行目か
らのpositionInitはcubeSpin.pyを通じて一回も呼び出されておらず、コメントアウトし
ても正常に動いた。
　loopでは、いつも通りにOpenGLにさまざまな関数をバインドしてOpenGLのメインルー
プを回している。そして、cubeRotate.pyと同様にcubeSpin.pyでも表示するオブジェク
トを変えることができる。
　22行目からのif節で、
　glutIdleFunc(self.idle)
　をelse節から出して、
　glutIdleFunc(None)
　が呼ばれないようにして実行した。実行した感じではほとんど差が感じられなかった
が、立方体が回転しているときに、マウスで画面をクリックしてみると、上のように変
更する前はボタンを押した瞬間に立方体は回転を止めたが、上のように変更してからは
ボタンを押しても回転し続けた。微妙な違いであるが、確かにボタンを押したときに止
まる方が直感的である。
　## 
　回転するにつれて回転が減衰するということで、まず真っ先に思いついたのは
mySpinCanvasの54行目に
　self.angle *= 0.99
　のように付け加えることであった。

##
　この課題では、マウス入力によってさまざまな変更を加えられるようにすることだっ
た。さまざまな変更の加え方が考えられるが、回転速度をマウスの積算値を回転速度に
比例させるようにする方針で作った。deltaX, deltaYの代わりに、daltaX, deltaYを足
し合わせた値を使用すれば良かったこうすると、左クリックでドラッグし続けると回転
速度が上がっていく、しかし、ここで回転速度が上がりすぎてしまうと見にくくなって
しまうため、回転速度を落とすための、マウスの設定を考えた。
　まず、右クリックで回転を止めるように設定した、cubeSpinのボタンを押し込むと止
まるのを参考にし右クリックを押した時に瞬時に止まるようにした。
　しかし、このようにしたところ折角速くしたのに一瞬で止まってしまうため、思った
ような速度で回すことができないそこで、中クリックで速度が落ちるように設定した。
そうすることで中クリックをするとゆっくりになるようになった。



